<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Conflict viewer test</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">
	
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/styles_d3Force.css">
	<script src="js/jquery-1.9.1.js"></script>
	<script src="js/d3.v3.min.js"></script>
	
<script type="text/javascript">
$(function(){

var treeCollection ={
	"aRoot" : {
		"name":"1",
		"children":[
			{
				"name":"2",
				"children":[				
					{"name":"6",
					"children":[]},
					{"name":"7",
					"children":[]}]
			},
			{
				"name":"3",
				"children":[
					{"name":"4",
					"children":[]}
				]
			}
		]
	},
	"bRoot" : {
		"name":"15",
		"children":[
			{
				"name":"2",
				"children":[]
			},
			{
				"name":"3",
				"children":[
					{"name":"4",
					"children":[]},
					{"name":"5",
					"children":[]}
				]
			}
		]
	}
};

var vis = d3.select("svg.treeLayout")

var tree = d3.layout.tree()
	.size([1100,750]);
	
var diagonal = d3.svg.diagonal()
	.projection(function(d){return [d.x+50,d.y+25];});
	
var loadConflict = function(rootVar){
	var node = vis.selectAll(".node"),
		link = vis.selectAll(".link"),
		label = vis.selectAll(".label");

	var root = rootVar;
	
	var nodes = tree.nodes(root),
		links = tree.links(nodes);
		
	link = link.data(links);
	link.exit().remove();
	link.enter().append("path")
			.attr("class","link")
	link.attr("d",diagonal);

	node = node.data(nodes);
	node.exit().remove();
	node.enter().append("circle")
		.attr("class", "node")
		.attr("r", 10)
	node.attr("cx",function(d){return d.x+50;})
		.attr("cy",function(d){return d.y+25;});
			
	label = label.data(nodes);
	label.enter()
		.append("text")
		.attr("class", "label")
		.attr("dy",3)
	label.text(function(d){return d.name})
		.attr("transform", function(d) {
			return "translate(" + (d.x+50) + "," + (d.y+25) + ")";
		  });
	label.exit().remove();
};

loadConflict(treeCollection.aRoot);

$(".confBtn").click(function(){
	var id = treeCollection[$(this).attr("id")];
	loadConflict(id);
});


});
</script>
	
</head>

<body>
<div class="container">
	<div class="confBtns">
		<div class="confBtn" id="aRoot" href="javascript:void">A</div>
		<div class="confBtn" id="bRoot" href="javascript:void">B</div>
		<div class="confBtn" id="cRoot" href="javascript:void">C</div>
	</div>

	<svg class="treeLayout">
		<defs>
			<marker id="arrow-head" viewBox="0 -5 18 10" refX="18" refY="0" markerWidth="15" markerHeight="10" orient="auto" color="inherit"><path d="M 0,-5  L 10,0  L 0,5"></path></marker>
	</svg>
	


</div>	
</body>
</html>